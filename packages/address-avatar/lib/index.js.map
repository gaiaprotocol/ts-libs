{"version":3,"file":"index.js","sourceRoot":"","sources":["../src/index.ts"],"names":[],"mappings":"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","sourcesContent":["import { getAddress } from \"viem\";\n\nconst ELEMENTS = 3;\nconst INTERNAL_SIZE = 80; // Fixed internal coordinate system size (not exposed externally)\n\nfunction hashCode(name: string) {\n  let hash = 0;\n  for (let i = 0; i < name.length; i++) {\n    const character = name.charCodeAt(i);\n    hash = ((hash << 5) - hash) + character;\n    hash = hash & hash; // Convert to 32-bit integer\n  }\n  return Math.abs(hash);\n}\n\nfunction getRandomColor(number: number, colors: string[], range: number) {\n  return colors[number % range];\n}\n\nfunction getDigit(number: number, ntn: number) {\n  return Math.floor((number / Math.pow(10, ntn)) % 10);\n}\n\nfunction getUnit(number: number, range: number, index?: number) {\n  const value = number % range;\n\n  // Flip direction if the indexed digit is even\n  if (index && ((getDigit(number, index) % 2) === 0)) {\n    return -value;\n  }\n  return value;\n}\n\nfunction generateColors(name: string, colors: string[]) {\n  const numFromName = hashCode(name);\n  const range = colors.length;\n  const size = INTERNAL_SIZE;\n\n  return Array.from({ length: ELEMENTS }, (_, i) => ({\n    color: getRandomColor(numFromName + i, colors, range),\n    translateX: getUnit(numFromName * (i + 1), size / 10, 1),\n    translateY: getUnit(numFromName * (i + 1), size / 10, 2),\n    scale: 1.2 + getUnit(numFromName * (i + 1), size / 20) / 10,\n    rotate: getUnit(numFromName * (i + 1), 360, 1),\n  }));\n}\n\nexport function getAddressAvatarSvg(address: string): string {\n  address = getAddress(address);\n\n  const properties = generateColors(address, [\n    \"#92A1C6\",\n    \"#146A7C\",\n    \"#F0AB3D\",\n    \"#ADD8E6\",\n    \"#FF6347\",\n  ]);\n\n  const SIZE = INTERNAL_SIZE;\n  const maskId = `mask_${hashCode(address)}`;\n\n  // Removed width/height â†’ let external <img> or CSS control the size (scales from viewBox)\n  return `\n<svg viewBox=\"0 0 ${SIZE} ${SIZE}\" fill=\"none\" role=\"img\" xmlns=\"http://www.w3.org/2000/svg\">\n  <mask id=\"${maskId}\" maskUnits=\"userSpaceOnUse\" x=\"0\" y=\"0\" width=\"${SIZE}\" height=\"${SIZE}\">\n    <rect width=\"${SIZE}\" height=\"${SIZE}\" fill=\"#FFFFFF\" rx=\"${SIZE * 2}\"></rect>\n  </mask>\n  <g mask=\"url(#${maskId})\">\n    <rect width=\"${SIZE}\" height=\"${SIZE}\" fill=\"${properties[0].color}\"></rect>\n    <path\n      filter=\"url(#filter_${maskId})\"\n      d=\"M32.414 59.35L50.376 70.5H72.5v-71H33.728L26.5 13.381l19.057 27.08L32.414 59.35z\"\n      fill=\"${properties[1].color}\"\n      transform=\"\n        translate(${properties[1].translateX} ${properties[1].translateY})\n        rotate(${properties[1].rotate} ${SIZE / 2} ${SIZE / 2})\n        scale(${properties[2].scale})\n      \">\n    </path>\n    <path\n      filter=\"url(#filter_${maskId})\"\n      d=\"M22.216 24L0 46.75l14.108 38.129L78 86l-3.081-59.276-22.378 4.005 12.972 20.186-23.35 27.395L22.215 24z\"\n      fill=\"${properties[2].color}\"\n      transform=\"\n        translate(${properties[2].translateX} ${properties[2].translateY})\n        rotate(${properties[2].rotate} ${SIZE / 2} ${SIZE / 2})\n        scale(${properties[2].scale})\n      \"\n      style=\"mix-blend-mode: overlay;\">\n    </path>\n  </g>\n  <defs>\n    <filter id=\"filter_${maskId}\" filterUnits=\"userSpaceOnUse\" color-interpolation-filters=\"sRGB\">\n      <feFlood flood-opacity=\"0\"></feFlood>\n      <feBlend in=\"SourceGraphic\" result=\"shape\"></feBlend>\n      <feGaussianBlur stdDeviation=\"7\"></feGaussianBlur>\n    </filter>\n  </defs>\n</svg>`;\n}\n\nfunction svgToDataUrl(svg: string): string {\n  // UTF-8 encoding for readability and easier debugging\n  return `data:image/svg+xml;utf8,${encodeURIComponent(svg)}`;\n}\n\nexport function getAddressAvatarDataUrl(address: string): string {\n  const svg = getAddressAvatarSvg(address);\n  return svgToDataUrl(svg);\n}\n"]}