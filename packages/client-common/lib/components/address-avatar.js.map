{"version":3,"file":"address-avatar.js","sourceRoot":"","sources":["../../src/components/address-avatar.ts"],"names":[],"mappings":"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","sourcesContent":["import { getAddress } from 'viem';\nimport { el } from '@webtaku/el';\nimport '../../src/components/address-avatar.css';\n\nconst ELEMENTS = 3;\nconst SIZE = 80;\n\nfunction hashCode(name: string) {\n  var hash = 0;\n  for (var i = 0; i < name.length; i++) {\n    var character = name.charCodeAt(i);\n    hash = ((hash << 5) - hash) + character;\n    hash = hash & hash; // Convert to 32bit integer\n  }\n  return Math.abs(hash);\n}\n\nfunction getRandomColor(number: number, colors: string[], range: number) {\n  return colors[number % range];\n}\n\nfunction getDigit(number: number, ntn: number) {\n  return Math.floor((number / Math.pow(10, ntn)) % 10);\n}\n\nfunction getUnit(number: number, range: number, index?: number) {\n  let value = number % range;\n\n  if (index && ((getDigit(number, index) % 2) === 0)) {\n    return -value;\n  } else return value;\n}\n\nfunction generateColors(name: string, colors: string[]) {\n  const numFromName = hashCode(name);\n  const range = colors && colors.length;\n\n  const elementsProperties = Array.from({ length: ELEMENTS }, (_, i) => ({\n    color: getRandomColor(numFromName + i, colors, range),\n    translateX: getUnit(numFromName * (i + 1), SIZE / 10, 1),\n    translateY: getUnit(numFromName * (i + 1), SIZE / 10, 2),\n    scale: 1.2 + getUnit(numFromName * (i + 1), SIZE / 20) / 10,\n    rotate: getUnit(numFromName * (i + 1), 360, 1),\n  }));\n\n  return elementsProperties;\n}\n\nlet __avatarSeq = 0;\nfunction uniqId(prefix = 'u') {\n  __avatarSeq += 1;\n  return `${prefix}_${Date.now().toString(36)}_${__avatarSeq}`;\n}\n\nfunction createAddressAvatar(walletAddress: string) {\n  walletAddress = getAddress(walletAddress);\n\n  const properties = generateColors(walletAddress, [\n    '#92A1C6',\n    '#146A7C',\n    '#F0AB3D',\n    '#ADD8E6',\n    '#FF6347',\n  ]);\n\n  // 인스턴스 고유 접두사\n  const scope = uniqId('addrav');\n  const maskId = `${scope}_mask`;\n  const filterId = `${scope}_filter`;\n\n  const svg = `<svg viewBox=\"0 0 ${SIZE} ${SIZE}\" fill=\"none\" role=\"img\" xmlns=\"http://www.w3.org/2000/svg\">\n  <mask id=\"${maskId}\" maskUnits=\"userSpaceOnUse\" x=\"0\" y=\"0\" width=\"${SIZE}\" height=\"${SIZE}\">\n    <rect width=\"${SIZE}\" height=\"${SIZE}\" fill=\"#FFFFFF\" rx=\"${SIZE * 2}\"></rect>\n  </mask>\n  <g mask=\"url(#${maskId})\">\n    <rect width=\"${SIZE}\" height=\"${SIZE}\" fill=\"${properties[0].color}\"></rect>\n    <path filter=\"url(#${filterId})\" d=\"M32.414 59.35L50.376 70.5H72.5v-71H33.728L26.5 13.381l19.057 27.08L32.414 59.35z\"\n      fill=\"${properties[1].color}\"\n      transform=\"translate(${properties[1].translateX} ${properties[1].translateY}) rotate(${properties[1].rotate} ${SIZE / 2} ${SIZE / 2}) scale(${properties[2].scale})\"></path>\n    <path filter=\"url(#${filterId})\" d=\"M22.216 24L0 46.75l14.108 38.129L78 86l-3.081-59.276-22.378 4.005 12.972 20.186-23.35 27.395L22.215 24z\"\n      fill=\"${properties[2].color}\"\n      transform=\"translate(${properties[2].translateX} ${properties[2].translateY}) rotate(${properties[2].rotate} ${SIZE / 2} ${SIZE / 2}) scale(${properties[2].scale})\"\n      style=\"mix-blend-mode: overlay;\"></path>\n  </g>\n  <defs>\n    <filter id=\"${filterId}\" filterUnits=\"userSpaceOnUse\" color-interpolation-filters=\"sRGB\">\n      <feFlood flood-opacity=\"0\" result=\"BackgroundImageFix\"></feFlood>\n      <feBlend in=\"SourceGraphic\" in2=\"BackgroundImageFix\" result=\"shape\"></feBlend>\n      <feGaussianBlur stdDeviation=\"7\" result=\"effect1_foregroundBlur\"></feGaussianBlur>\n    </filter>\n  </defs>\n</svg>`;\n\n  return el('.address-avatar', { innerHTML: svg });\n}\n\nexport { createAddressAvatar };\n"]}